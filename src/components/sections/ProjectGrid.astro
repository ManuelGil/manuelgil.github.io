---
import { defaultProjects } from '../../data/defaultProjects';
import type { Project } from '../../types/Project';
import ProjectCard from '../atoms/ProjectCard.astro';

const projects: Project[] = defaultProjects;
---

<div class="mx-auto max-w-5xl" id="projects-container" aria-live="polite">
  <!-- Loading State with improved accessibility -->
  <div id="loading-state" class="hidden py-12 text-center" aria-hidden="true">
    <div class="flex flex-col items-center justify-center gap-4">
      <div
        class="inline-block h-10 w-10 animate-spin rounded-full border-4 border-solid border-[#ff6b00] border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"
        role="status"
      >
        <span class="sr-only">Loading projects...</span>
      </div>
      <p class="animate-pulse text-gray-600">Loading projects...</p>
    </div>
  </div>

  <!-- Project grid with responsive design and animations -->
  <div
    class="grid grid-cols-1 gap-6 transition-opacity duration-500 ease-in-out md:grid-cols-2 lg:grid-cols-3"
    id="projects"
    aria-label="Project gallery"
  >
    {
      projects.map((project) => (
        <div class="project-card" data-category={project.category}>
          <ProjectCard
            title={project.title}
            description={project.description}
            category={project.category}
            tags={project.tags}
            links={project.links}
            image={project.image}
            date={project.date}
            data-has-image={
              project.image && project.image.length > 0 ? 'true' : 'false'
            }
            data-has-date={
              project.date && project.date.length > 0 ? 'true' : 'false'
            }
          />
        </div>
      ))
    }
  </div>

  <!-- Empty State with improved UI -->
  <div id="empty-state" class="hidden py-12 text-center" aria-live="polite">
    <div class="mx-auto max-w-md rounded-lg bg-gray-50 p-8">
      <svg
        class="mx-auto mb-4 h-12 w-12 text-gray-400"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
        ></path>
      </svg>
      <p class="mb-2 text-gray-600">No projects found in this category.</p>
      <p class="text-sm text-gray-500">Try selecting a different category.</p>
    </div>
  </div>
</div>
