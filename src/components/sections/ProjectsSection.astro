---
import { defaultProjects } from '../../data/defaultProjects';
import CategoryFilter from './CategoryFilter.astro';
import ProjectGrid from './ProjectGrid.astro';

// Use default projects for initial SSR
const projects = defaultProjects;

// Extract unique categories and add 'All' option
const categories = [
  'All',
  ...new Set(projects.map((project) => project.category)),
];
---

<section
  id="projects-section"
  class="bg-gray-100 px-4 py-16 sm:px-6 lg:px-8"
  aria-labelledby="projects-heading"
>
  <h2 class="section-title text-gray-900">Featured Projects</h2>
  <p class="mx-auto mb-8 max-w-2xl text-center text-gray-600">
    Browse a collection of my recent open source projects and work. Filter by
    category to find specific technologies.
  </p>
  <CategoryFilter categories={categories} />
  <ProjectGrid projects={projects} />
</section>
